   1: 0000: \******************************************************************************
   2: 0000: \******************************************************************************
   3: 0000: \***
   4: 0000: \***   $Workfile:   STKMFFUN.BAS  $
   5: 0000: \***
   6: 0000: \***   $Revision:   1.1  $
   7: 0000: \***
   8: 0000: \******************************************************************************
   9: 0000: \******************************************************************************\******************************************************************************
  10: 0000: \******************************************************************************
  11: 0000: \***
  12: 0000: \***              STOCKTAKE MAINFRAME TRANSMISSION  FILE FUNCTIONS
  13: 0000: \***
  14: 0000: \***               REFERENCE    : STKMFFUN.BAS
  15: 0000: \***
  16: 0000: \***         VERSION A            Nik Sen         19th June 1997
  17: 0000: \***
  18: 0000: \***
  19: 0000: \*******************************************************************************
  20: 0000: \*******************************************************************************
  21: 0000: 
  22: 0000:     INTEGER*2 GLOBAL                \
  23: 0000:        CURRENT.REPORT.NUM%
  24: 0000:        
  25: 0000:     STRING GLOBAL                    \
  26: 0000:        CURRENT.CODE$,                \
  27: 0000:        FILE.OPERATION$
  28: 0000:     
  29: 0000:     %INCLUDE STKMFDEC.J86                                       
  30: 0000: \******************************************************************************
  31: 0000: \******************************************************************************
  32: 0000: \***
  33: 0000: \***   $Workfile:   STKMFDEC.J86  $
  34: 0000: \***
  35: 0000: \***   $Revision:   1.0  $
  36: 0000: \***
  37: 0000: \******************************************************************************
  38: 0000: \******************************************************************************
  39: 0000: \***
  40: 0000: \***   $Log:   V:\archive\j86\stkmfdec.j8v  $
  41: 0000: \***   
  42: 0000: \***      Rev 1.0   15 Jul 1997 14:20:54   DEV45PS
  43: 0000: \***    
  44: 0000: \***   
  45: 0000: \***      Rev 1.0   09 Jul 1997 11:05:16   DEV45PS
  46: 0000: \***   Stocktake System New Files
  47: 0000: \***   
  48: 0000: \******************************************************************************
  49: 0000: \******************************************************************************\******************************************************************************
  50: 0000: \******************************************************************************
  51: 0000: \***
  52: 0000: \***  %INCLUDES FOR STOCKTAKE MAONFRAME TRANSMISSION FILE FIELD DECLARATIONS
  53: 0000: \***
  54: 0000: \***               FILE TYPE    : DIRECT
  55: 0000: \***
  56: 0000: \***               REFERENCE    : STKMFDEC.J86
  57: 0000: \***
  58: 0000: \***    VERSION A.              Nik Sen.               19 Jun 1997.
  59: 0000: \***    New file for stocktaking system. Holds stocktake data for 
  60: 0000: \***    transmission to the maonframe.
  61: 0000: \***
  62: 0000: \*******************************************************************************
  63: 0000: \*******************************************************************************
  64: 0000: 
  65: 0000: STRING GLOBAL                                                  \
  66: 0000:        STKMF.FILE.NAME$,               \
  67: 0000:        STKMF.DATA$,                    \
  68: 0000:        STKMF.STORE.NUMBER$,            \
  69: 0000:        STKMF.STOCKTAKER.NUM$,          \
  70: 0000:        STKMF.FILLER$,                  \
  71: 0000:        STKMF.DELIMITER$,               \
  72: 0000:        STKMF.DATE$,                    \
  73: 0000:        STKMF.LOCATION$,                \
  74: 0000:        STKMF.ITEM.CODE$,               \
  75: 0000:        STKMF.QUANTITY$,                \
  76: 0000:        STKMF.PRICE$,                   \
  77: 0000:        STKMF.RECORD.COUNT$
  78: 0000:                        
  79: 0000: INTEGER*4 GLOBAL               \
  80: 0000:        STKMF.RECORD.NUM%
  81: 0000: 
  82: 0000: INTEGER*2 GLOBAL                \
  83: 0000:    STKMF.REPORT.NUM%,           \
  84: 0000:    STKMF.SESS.NUM%             
  85: 0000: 
  86: 0000: 
  87: 0000: INTEGER*1 GLOBAL                \
  88: 0000:    STKMF.RECL%         
  89: 0000: 
  90: 0000: 
  91: 0000: 
  92: 0000:   FUNCTION STKMF.SET PUBLIC
  93: 0014: \***************************
  94: 0014: 
  95: 0014:     STKMF.REPORT.NUM% = 530
  96: 001d:     STKMF.RECL%       = 27
  97: 0025:     STKMF.FILE.NAME$  = "STKMF"
  98: 0034:     
  99: 0034:   END FUNCTION
 100: 0040:     
 101: 0040: \-----------------------------------------------------------------------------
 102: 0040: 
 103: 0040: FUNCTION READ.STKMF PUBLIC
 104: 0054: \****************************
 105: 0054: 
 106: 0054:     INTEGER*2 READ.STKMF
 107: 0054:     
 108: 0054:     READ.STKMF = 1
 109: 0059:     
 110: 0059:     IF END #STKMF.SESS.NUM% THEN READ.STKMF.ERROR
 111: 006d:     READ FORM "C27"; #STKMF.SESS.NUM%, STKMF.RECORD.NUM%;  STKMF.DATA$
 112: 009f: 
 113: 009f:     READ.STKMF = 0
 114: 00a4:     EXIT FUNCTION
 115: 00a6:     
 116: 00a6: READ.STKMF.ERROR:
 117: 00a6:     
 118: 00a6: 
 119: 00a6:        FILE.OPERATION$ = "R"
 120: 00b5:        CURRENT.REPORT.NUM% = STKMF.REPORT.NUM%
 121: 00c3:        
 122: 00c3:        EXIT FUNCTION
 123: 00c5: 
 124: 00c5: END FUNCTION
 125: 00d4: 
 126: 00d4: \-----------------------------------------------------------------------------
 127: 00d4:   
 128: 00d4: 
 129: 00d4:   
 130: 00d4: FUNCTION WRITE.STKMF PUBLIC
 131: 00e8: \*****************************
 132: 00e8: 
 133: 00e8:        INTEGER*2 WRITE.STKMF
 134: 00e8:     
 135: 00e8:        WRITE.STKMF = 1
 136: 00ed:     
 137: 00ed:        IF END #STKMF.SESS.NUM% THEN WRITE.STKMF.ERROR
 138: 0101:        WRITE FORM "C27"; #STKMF.SESS.NUM%,STKMF.RECORD.NUM%; STKMF.DATA$  
 139: 0133: 
 140: 0133:        WRITE.STKMF = 0
 141: 0138:        EXIT FUNCTION
 142: 013a:    
 143: 013a: WRITE.STKMF.ERROR:
 144: 013a:    
 145: 013a: 
 146: 013a:       FILE.OPERATION$ = "W"                                            
 147: 0149:       CURRENT.REPORT.NUM% = STKMF.REPORT.NUM%
 148: 0157:       
 149: 0157:       EXIT FUNCTION
 150: 0159: 
 151: 0159: END FUNCTION
 152: 0168: 
 153: 0168: 
 154: 0168: End of Compilation
